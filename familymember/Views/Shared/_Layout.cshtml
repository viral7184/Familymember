<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewBag.Title</title>
    <meta name="description" content="">
    <meta name="author" content="templatemo">
    <!--
    Visual Admin Template
    http://www.templatemo.com/preview/templatemo_455_visual_admin
    -->
    @*<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,700' rel='stylesheet' type='text/css'>
        <link href="~/css/font-awesome.min.css" rel="stylesheet">
        <link href="~/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
        <link href="~/css/templatemo-style.css" rel="stylesheet">
        <link href="~/css/lightbox.css" rel="stylesheet" />
        <link href="~/bootstrap/css/bootstrap.css" rel="stylesheet" />*@

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,700' rel='stylesheet' type='text/css'>
    <link href="~/css/font-awesome.min.css" rel="stylesheet">
    <link href="~/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/css/templatemo-style.css" rel="stylesheet">
    <link href="~/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="~/css/lightbox.css" rel="stylesheet" />

    @*<link rel="stylesheet" href="../../plugins/select2/select2.min.css">
    <link rel="stylesheet" href="../../dist/css/AdminLTE.css">
    <link rel="stylesheet" href="../../bootstrap/css/bootstrap.min.css">*@
    
    @*<link href="~/css/css/select2.css" rel="stylesheet" />*@   
    <link href="~/css/css/select2.min.css" rel="stylesheet" />
   
    <link href="~/bootstrap/js/bootstrap-treeview.min.css" rel="stylesheet" />
    <link href="~/bootstrap/src/css/bootstrap-treeview.css" rel="stylesheet" />


    <script src="~/bootstrap/jquery.min.js"></script>




    @*<link href="~/css/AdminLTE.css" rel="stylesheet" />
        <link href="~/css/AdminLTE.min.css" rel="stylesheet" />*@

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    @*@if (Session["email"] == null)
        {
            Response.Redirect("~/Home/Login");
        }*@

    @if (Session["roll"] != null)
    {
        if (Session["roll"].ToString() == "MainMember")
        {
            <style>
                .hide_me {
                    display: Hidden;    
                }
            </style>
        }
        else if (Session["roll"].ToString() == "SubMember1")
        {
            <style>
                .hide_me {
                    display: block;
                }
            </style>
        }
     
        else if (Session["roll"].ToString() == "SuperAdmin")
        {
            <style>
                .display_all {
                    display: block;
                }
            </style>
        }

    }
    else
    {
        <style>
            .hide_me {
                display: none;
            }
        </style>
    }
</head>



<div class="modal fade" id="changepassword" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="height:265px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title" id="myModalLabel">change password</h4>
            </div>
            <div class="modal-body">
                <!-- /.box-header -->

                <div class="form-group ">
                    <label>Member Email</label>
                    <input type="text" name="EMAIL" id="EMAIL" class="form-control" placeholder="Enter Member Email">
                    <!-- <span class="help-block error">* User Name Already Exist</span> -->
                </div>
                <div class="form-group ">
                    <label>new password</label>
                    <input type="password" name="PASSWORD" id="PASSWORD" class="form-control" placeholder="Enter password">
                </div>
                <div class="box-footer">
                    <input type="hidden" id="hide" name="ID" />
                    <button type="button" id="changepassword" onclick="changepassword()" data-dismiss="modal" class="btn btn-info pull-right">change password</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="groupnotification" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="height:220px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
              
            </div>
            <div class="modal-body" >
                <!-- /.box-header -->       
         
                @Html.Raw(Session["groupname"])
                
                <a href="~/Home/groupnoti"></a>   
            </div>
        </div>
    </div>
</div>


<body>
    <!-- Left column -->
    <div class="templatemo-flex-row">
        <div class="templatemo-sidebar">
            <header class="templatemo-site-header">
                <h2>Family Member</h2>
            </header>
            <div class="profile-photo-container">
                <img src="~/images/profile-photo.jpg" alt="Profile Photo" class="img-responsive">

                <div class="profile-photo-overlay"></div>
            </div>
            <!-- Search box -->
            <form class="templatemo-search-form" role="search">
                @*<div class="input-group">
                        <button type="submit" class="fa fa-search"></button>
                        <input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term">
                    </div>*@
            </form>
         
            <nav class="templatemo-left-nav">
                <ul>
                    <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "Familymember" ? "active" : "")"><a href="~/Home/Familymember"><i class="fa fa-bar-chart fa-fw "></i>Familymember</a></li>
                    <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "Address" ? "active" : "")"><a href="~/Home/Address"><i class="fa fa-map-marker fa-fw"></i>Address</a></li>
                    <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "Notification" ? "active" : "")"><a href="~/Home/Notification"><i class="fa fa-map-marker fa-fw"></i>Groups</a></li>
                    <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "ImageGallery" ? "active" : "")"><a href="~/Home/ImageGallery"><i class="fa fa-users fa-fw"></i>Image Gallery</a></li>
                    <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "VideoGallery" ? "active" : "")"><a href="~/Home/VideoGallery"><i class="fa fa-sliders fa-fw"></i>Video Gallery</a></li>
                    <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "Events" ? "active" : "")"><a href="~/Home/Events"><i class="fa fa-sliders fa-fw"></i>Events</a></li>
                    <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "Events" ? "active" : "")"><a href="~/Home/Relationship"><i class="fa fa-sliders fa-fw"></i>Relationship</a></li>
                    @*<li class="@(ViewContext.RouteData.Values["Action"].ToString() == "Notification" ? "active" : "")"><a href="~/Home/Notification"><i class="fa fa-sliders fa-fw"></i>Group Members</a></li>*@
                    <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "member_role" ? "active" : "")"><a href="~/Home/member_role"><i class="fa fa-sliders fa-fw"></i>Member Role</a></li>
                    <li class="@(ViewContext.RouteData.Values["Action"].ToString() == "logout" ? "active" : "")"><a href="~/Home/logout"><i class="fa fa-eject fa-fw"></i>logogut</a></li>
                </ul>
            </nav>
        </div>

        <!-- Main content -->
        <div class="templatemo-content col-1 light-gray-bg">
            <div class="templatemo-top-nav-container" style="padding:31px">
                <div class="row">
                    <nav class="templatemo-top-nav col-lg-12 col-md-12" style="margin-left:560px">
                        <ul class="text-uppercase">

                            @if (Session["user"] != null)
                            {
                                <li class="hidden"><a href="~/Home/logout">Login</a></li>
                                <li class="hidden"><a href="~/Home/Registration">Create a Account</a></li>
                              
                                @*<li><a data-toggle="modal" data-target="#groupnotification" >Group Notification <span class="badge">@Session["groupnoti"]</span> </a></li>*@

                            }
                            else
                            {
                                <li><a href="~/Home/logout">Login</a></li>
                                <li><a href="~/Home/Registration">Registration</a></li>
                            }

                            @*@if(Session["groupnoti"] != null)
                                {
                                <li><a data-toggle="modal" data-target="#groupnotification">Group Notification <span class="badge">@Session["groupnoti"]</span> </a></li>
                                }*@

                            @if (Session["user"] != null)
                            {
                                var a = Convert.ToInt16(Session["noticount"]);
                                if (a != 0)
                                {
                                    <li id="hide2"><a data-toggle="modal"  data-target="#groupnotification"> <i class="fa fa-group">@Session["noticount"]</i> </a></li>
                                }
                                else
                                {

                                }
                                var b = Convert.ToInt16(Session["events"]);
                                if (b != 0)
                                { 
                                <li><a href="~/Home/Events?eve=event"> <i class="fa fa-bell-o">@Session["events"]</i> </a></li>
                                }
                                else
                                {

                                }
                            }

                            @if (Session["user"] != null)
                            {
                                <li class="dropdown">
                                    <a data-toggle="dropdown">
                                        @*<b>Login By </b>*@
                                        @if (Session["name"] != null)
                                        {
                                            @Session["name"].ToString().Trim()
                                        }
                                        <span class="caret"></span>
                                    </a>

                                    <ul class="dropdown-menu">
                                        <li><a data-toggle="modal" data-target="#changepassword">change password</a></li>
                                        <li><a href="~/Home/logout">Logout</a></li>
                                    </ul>
                                </li>
                            }
                            else
                            {
                                
                            }
                        </ul>

                    </nav>
                </div>
            </div>
            <div class="templatemo-content-container">
                 @RenderBody()
            </div>
        </div>
    </div>

    <script>
        function groupnotification(actn,grpnm) {
            var ab =
                {
                    group_noti: actn,
                    group_name: grpnm
                }

            $.ajax({
                url: '/Home/groupnoti',
                type: "post",
                data: ab,
                success: function (data) {
                    $('#groupnotification').modal('hide'),
                     $('#hide2').hide();
                }
            });
        }
    </script>


    <!-- JS -->
    <!-- jQuery -->
    @*<script src="~/js/jquery-migrate-1.2.1.min.js"></script> <!--  jQuery Migrate Plugin -->
        <script src="https://www.google.com/jsapi"></script> <!-- Google Chart -->

        <script src="~/bootstrap/js/bootstrap.js"></script>
        <script src="~/bootstrap/js/bootstrap.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="~/js/bootstrap-datepicker.js"></script>
        <script src="~/js/lightbox.js"></script>*@
    @*<script src="~/js/bootstrap-datepicker.js"></script>*@
    
    <script src="~/js/jquery-1.11.2.min.js"></script>
    <script src="https://www.google.com/jsapi"></script> <!-- Google Chart -->

    <script src="~/js/jquery-migrate-1.2.1.min.js"></script> <!--  jQuery Migrate Plugin -->
    <script src="~/bootstrap/bootstrap.min.js"></script>
    @*<script src="~/js/jquery-1.11.2.min.js"></script>*@
    <script src="~/js/bootstrap-datepicker.js"></script>
    <script src="~/js/lightbox.js"></script>
   

    <script src="~/js/bootstrap-filestyle.min.js"></script>

    <script src="~/css/js/select2.full.min.js"></script>

  

    <script>
        $('#datepicker2').datepicker({
            format: 'dd/mm/yyyy'
        });

        $('#datepicker3').datepicker({
            format: 'dd/mm/yyyy'
        });
    </script>

    <style>
        .dropdown-menu {
            z-index: 1100;
        }
    </style>

    <script>

    function changepassword() {
        if (confirm("Are you sure to change Password?")) {

            var email = $('#EMAIL').val();
            var password = $('#PASSWORD').val();

            $.ajax({
                url: '/Home/changepassword/',
                data: { 'email': email, 'password': password },
                type: "post",
                cache: false,
                success: function (savingStatus) {
                    //$('#myModalLabel').hide();

                    alert("Your password has been successfully changed!");

                },
                error: function (xhr, ajaxOptions, thrownError) {
                    $('#lblCommentsNotification').text("Error encountered while changing your password.");
                }
            });
        }
        return false;
    };

    </script>

    <script type="text/javascript" src="~/js/templatemo-script.js"></script>      <!-- Templatemo Script -->
</body>
</html>